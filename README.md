# 🏥 AI 기반 통합 건강 모니터링 & 화면 최적화 시스템

** AI 기반 통합 건강 모니터링 & 화면 최적화 프로젝트**

<img src="https://github.com/hani0303/HealthMonitor/blob/main/assets/halth_img.png" width="500">

## 1. 프로젝트 개요

PC 카메라나 스마트폰 카메라를 이용해 사용자의 얼굴과 자세를 실시간으로 분석하여, 별도의 웨어러블 장비 없이 **심박수, 혈압, 산소포화도, 스트레스 지수** 등 주요 건강 지표를 비접촉식으로 측정하는 시스템입니다. 또한, 거북목 방지를 위한 자세 교정 및 눈 건강을 위한 화면 최적화 기능까지 통합하여, 사용자의 디지털 웰빙을 종합적으로 관리하는 것을 목표로 합니다.

이 프로젝트는 컴퓨터 비전(Mediapipe), 신호 처리(Scipy), 그리고 대규모 언어 모델(OpenAI GPT-4o)을 융합하여, 복잡한 생체 신호를 어떻게 실용적인 정보로 변환하고 사용자에게 가치 있는 피드백을 제공할 수 있는지를 보여줍니다.

## 2. 주요 기능

*   **비접촉식 바이탈 사인 측정 (rPPG)**
    *   카메라로 촬영된 얼굴 영상에서 미세한 피부색 변화를 분석하여 PPG(광용적맥파) 신호를 추출합니다.
    *   **측정 지표**: 심박수(HR), 혈압(BP, 추정치), 호흡수(RR), 산소포화도(SpO2, 추정치)
*   **정신 건강 분석**
    *   심박변이도(HRV)를 실시간으로 계산하여 **스트레스 지수**를 시각적으로 보여줍니다.
*   **자세 및 시청 환경 분석**
    *   **거북목 감지**: 머리와 어깨의 상대적 위치를 분석하여 올바른 자세를 유지하도록 유도합니다.
    *   **시청 거리 측정**: 얼굴 크기를 기반으로 모니터와의 거리를 추정하여 눈 건강을 위한 적정 거리를 제안합니다.
*   **지능형 자동화**
    *   **화면 밝기 자동 조절**: 현재 시간에 맞춰 눈의 피로를 줄일 수 있는 최적의 화면 밝기를 자동으로 설정합니다.
    *   **AI 맞춤형 건강 조언**: 측정된 데이터를 기반으로 OpenAI GPT-4o가 실시간으로 개인화된 건강 관리 팁을 제공합니다.
*   **데이터 시각화 및 기록**
    *   측정된 모든 지표를 실시간으로 시각화하고, 최근 측정 기록을 표로 관리하여 건강 상태의 변화를 쉽게 파악할 수 있습니다.

## 3. 기술 스택

*   **언어**: Python 3.11
*   **AI/ML**:
    *   `MediaPipe`: 얼굴 및 자세 랜드마크 실시간 추적
    *   `OpenCV`: 카메라 제어 및 비전 처리
    *   `Scipy`, `Numpy`: PPG 신호 필터링, FFT, 피크 검출 등 디지털 신호 처리
    *   `OpenAI (GPT-4o)`: 개인화된 건강 조언 생성
*   **웹 프레임워크**: `Streamlit`
*   **기타**: `python-dotenv`, `pandas`, `matplotlib`, `screen_brightness_control`

## 4. 설치 및 실행 방법

### 4.1. 사전 요구사항
*   Python 3.9 이상
*   Git

### 4.2. 설치 과정
1.  **프로젝트 클론**
    ```
    git clone https://github.com/hani0303/HealthMonitor.git
    cd Integrated-Health-Monitor
    ```
2.  **가상환경 생성 및 활성화**
    ```
    # Windows
    python -m venv .venv
    .\.venv\Scripts\activate
    ```
3.  **필수 라이브러리 설치**
    ```
    pip install -r requirements.txt
    ```
4.  **환경 변수 설정 (`.env` 파일)**
    프로젝트 루트에 `.env` 파일을 생성하고, 아래와 같이 본인의 OpenAI API 키를 입력합니다.
    ```
    OPENAI_API_KEY="sk-..."
    ```

### 4.3. 실행 방법
프로젝트 루트 디렉터리에서 아래 명령어를 실행합니다.
```
streamlit run src/app.py
```
명령어 실행 후, 웹 브라우저에서 `http://localhost:8501` 주소로 애플리케이션이 실행됩니다.

### 4.4. (선택) 스마트폰으로 외부 접속하기 (ngrok 사용)
로컬 PC에서 실행 중인 앱을 스마트폰의 웹 브라우저로 접속하려면 `ngrok`을 사용합니다.

1.  **ngrok 설치** (최초 한 번만)
    `pip`를 통해 `pyngrok` 라이브러리를 설치합니다.
    ```
    pip install pyngrok
    ```

2.  **ngrok 터널링 실행**
    애플리케이션이 실행 중인 터미널은 그대로 두고, **별도의 새 터미널(CMD) 창**을 열어 아래 명령어를 실행합니다. Streamlit의 기본 포트인 `8501`을 외부로 노출시키는 명령어입니다.
    ```
    ngrok http 8501
    ```

3.  **URL 확인 및 접속**
    명령어 실행 후, 터미널에 아래와 같이 `Forwarding` 주소가 나타납니다.
    ```
    Forwarding      https://xxxxxxxx.ngrok-free.app -> http://localhost:8501
    ```
    이제 스마트폰 웹 브라우저에서 `https://xxxxxxxx.ngrok-free.app` 주소로 접속하면, PC와 동일한 애플리케이션 화면을 볼 수 있습니다.

## 5. 사용 방법
1.  '시스템 시작' 버튼을 클릭합니다.
2.  화면에 얼굴과 상체가 잘 보이도록 자세를 잡습니다.
3.  약 15초간 안정된 자세를 유지하면, 오른쪽에 실시간 건강 지표들이 표시되기 시작합니다.
4.  AI가 분석한 맞춤형 건강 조언을 확인하고, 자세 및 화면 거리 조언에 따라 환경을 개선합니다.

> ⚠️ **주의사항**: 본 시스템에서 제공하는 건강 정보는 의료적 진단을 대체할 수 없으며, 건강 관리를 위한 참고 자료로만 활용해야 합니다.
```
